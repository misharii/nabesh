<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لعبة نابش</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Rakkas&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #121212;
            color: #ffffff; /* White text for visibility */
            font-family: 'Rakkas', cursive;
        }
        .form-control {
            background-color: #333333;
            border-color: #666666;
            color: #ffffff; /* White text for inputs */
        }
        .list-group-item {
            background-color: #222222;
            border-color: #444444;
            position: relative; /* Needed for absolute positioning of ranking text */
            color: #ffffff; /* White text for list items */
        }
        .progress {
            background-color: #343a40; /* Dark background for the progress bar */
            height: 10px; /* Thinner progress bars */
            margin-right: 50px; /* Space for the ranking text */
        }
        .progress-bar {
            position: relative; /* For the progress text to position correctly */
        }


        .ranking-badge {        ranking outside the bar
            position: absolute;
            right: 0;
            top: 0;
            z-index: 2; /* Ensures the text is above the progress bar */
         }

        .alert {
            background-color: #343a40; /* Darker background for alerts */
            color: #ffffff; /* White text for alerts */
        }
        ::placeholder {
  color: white;
}
    </style>
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">لعبة نابش</h2>
        <!-- Guess Form -->
        <form action="/guess" method="POST" class="mb-3">
            <div class="mb-3">
                <input type="text" name="guess" class="form-control" placeholder="أدخل تخمينك هنا" >
            </div>
           <div class="mb-3 d-flex justify-content-md-start btn-group" role="group" style="direction: ltr; gap: .5rem;">
    <button type="submit" formaction="/reset" class="btn btn-danger">حذف</button>
    <button type="submit" class="btn btn-success">تخمين</button>
</div>
        </form>
        {% if message %}
            <div class="alert alert-secondry">{{ message }}</div>
        {% endif %}
        <ul class="list-group">
            {% for guess, ranking in guesses %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ guess }}
                    <div class="w-50 position-relative"> <!-- Container for progress bar and ranking badge -->
                        <div class="progress">
                            <div class="progress-bar"
                                role="progressbar"
                                style="
                                    width: {% if ranking <= 1250 %}{{ 100 - ((ranking - 1) / 1250 * 100) }}%{% else %}1%{% endif %};
                                    {% if ranking <= 250 %}background-color: #28a745;
                                    {% elif ranking <= 500 %}background-color: #80c904;
                                    {% elif ranking <= 750 %}background-color: #ffbc44;
                                    {% elif ranking <= 1000 %}background-color: #ff7700;
                                    {% elif ranking <= 1250 %}background-color: #FF4500;
                                    {% else %}background-color: #DC3545;
                                    {% endif %}"
                                aria-valuenow="{{ ranking }}"
                                aria-valuemin="0"
                                aria-valuemax="1250">
{#                                        <span class="ranking-badge">{{ ranking }}</span> <!-- Moved inside progress bar -->#}

                            </div>
                        </div>
                        <span class="ranking-badge badge bg-transparent">{{ ranking }}</span>
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.9/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
</body>
</html>